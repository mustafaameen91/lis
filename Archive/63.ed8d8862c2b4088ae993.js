(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{9399:function(e,t,n){"use strict";n.r(t),n.d(t,"IncomePageModule",function(){return h});var o=n("ofXK"),i=n("3Pt+"),s=n("TEn/"),b=n("tyNb"),c=n("vDqi"),r=n.n(c),l=n("U8hz"),a=n("wd/R"),u=n("fXoL");function d(e,t){if(1&e&&(u.Pb(0,"ion-select-option",17),u.nc(1),u.Ob()),2&e){const e=t.$implicit;u.ec("value",e.idTest),u.zb(1),u.oc(e.testName)}}function m(e,t){if(1&e&&(u.Pb(0,"ion-card",18),u.Pb(1,"ion-card-content"),u.Pb(2,"ion-grid",0),u.Pb(3,"ion-row"),u.Pb(4,"ion-col",19),u.Pb(5,"ion-list"),u.Pb(6,"ion-item",20),u.Lb(7,"ion-icon",21),u.Pb(8,"ion-label"),u.nc(9," Test name: "),u.Pb(10,"b"),u.nc(11),u.Ob(),u.Ob(),u.Ob(),u.Pb(12,"ion-item",20),u.Lb(13,"ion-icon",22),u.Pb(14,"ion-label"),u.nc(15," Patient name: "),u.Pb(16,"b"),u.nc(17),u.Ob(),u.Ob(),u.Ob(),u.Pb(18,"ion-item",20),u.Lb(19,"ion-icon",23),u.Pb(20,"ion-label"),u.nc(21," Price: "),u.Pb(22,"b"),u.nc(23),u.ac(24,"number"),u.Ob(),u.Ob(),u.Ob(),u.Ob(),u.Ob(),u.Pb(25,"ion-col",19),u.Pb(26,"ion-list"),u.Pb(27,"ion-item",20),u.Lb(28,"ion-icon",24),u.Pb(29,"ion-label"),u.nc(30," Requested: "),u.Pb(31,"b"),u.nc(32),u.Ob(),u.Ob(),u.Ob(),u.Pb(33,"ion-item",20),u.Lb(34,"ion-icon",24),u.Pb(35,"ion-label"),u.nc(36," Collected: "),u.Pb(37,"b"),u.nc(38),u.Ob(),u.Ob(),u.Ob(),u.Pb(39,"ion-item",20),u.Lb(40,"ion-icon",24),u.Pb(41,"ion-label"),u.nc(42," Perform: "),u.Pb(43,"b"),u.nc(44),u.Ob(),u.Ob(),u.Ob(),u.Ob(),u.Ob(),u.Ob(),u.Ob(),u.Ob(),u.Ob()),2&e){const e=t.$implicit,n=u.Zb();u.zb(11),u.oc(e.testName),u.zb(6),u.oc(e.name),u.zb(6),u.oc(u.bc(24,6,e.price)),u.zb(9),u.oc(n.fixDate(e.requested)),u.zb(6),u.oc(n.fixDate(e.collected)),u.zb(6),u.oc(n.fixDate(e.perform))}}const O=[{path:"",component:(()=>{class e{constructor(){this.tests=[],this.search={from:a(new Date).format("YYYY-MM-DD"),to:a(new Date).format("YYYY-MM-DD"),testId:0},this.results=[]}ngOnInit(){r.a.get(l.a+"tests").then(e=>{this.tests=e.data})}searchTests(){let e=a(this.search.from).format("YYYY-MM-DD"),t=a(this.search.to).format("YYYY-MM-DD");r.a.get(l.a+`income?dateOne=${e}&dateTwo=${t}&testId=${this.search.testId}`).then(e=>{this.results=e.data,console.log(this.results)})}sum(){let e=0;for(let t=0;t<this.results.length;t++)e+=this.results[t].price;return e}exportToExcel(){let e=[];for(let t=0;t<this.results.length;t++)e.push({patientName:this.results[t].name,age:a().diff(this.results[t].dob,"years",!1),gender:0==this.results[t].gender?"Male":"Female",address:this.results[t].address,testName:this.results[t].testName,result:this.results[t].result,phone:this.results[t].phone,date:this.results[t].requested,price:this.results[t].price,testId:this.results[t].idPatientResult});r.a.post(l.a+"createExcel",e).then(e=>{console.log(e.data),window.open(l.a+e.data.url)})}fixDate(e){return a(e).format("YYYY-MM-DD \u2013\u2013 hh:mm A")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u.Eb({type:e,selectors:[["app-income"]],decls:45,vars:9,consts:[["fixed",""],["size","4"],["slot","start","name","calendar"],["display-format","YYYY-MM-DD",3,"ngModel","ngModelChange"],["slot","start","name","flask"],[3,"ngModel","ngModelChange"],["value","0"],[3,"value",4,"ngFor","ngForOf"],["slot","end"],["fill","solid","color","warning",3,"click"],["slot","start","name","search"],[1,"ion-padding"],["size","1"],["size","10"],["mode","ios",4,"ngFor","ngForOf"],["fill","solid","color","success",3,"click"],["slot","start","name","attach-outline"],[3,"value"],["mode","ios"],["size","6"],["lines","full"],["name","flask-outline","slot","start"],["name","person-circle-outline","slot","start"],["name","cash-outline","slot","start"],["name","calendar-outline","slot","start"]],template:function(e,t){1&e&&(u.Pb(0,"ion-header"),u.Pb(1,"ion-toolbar"),u.Pb(2,"ion-grid",0),u.Pb(3,"ion-row"),u.Pb(4,"ion-col",1),u.Pb(5,"ion-item"),u.Lb(6,"ion-icon",2),u.Pb(7,"ion-label"),u.nc(8,"From"),u.Ob(),u.Pb(9,"ion-datetime",3),u.Xb("ngModelChange",function(e){return t.search.from=e}),u.Ob(),u.Ob(),u.Ob(),u.Pb(10,"ion-col",1),u.Pb(11,"ion-item"),u.Lb(12,"ion-icon",2),u.Pb(13,"ion-label"),u.nc(14,"To"),u.Ob(),u.Pb(15,"ion-datetime",3),u.Xb("ngModelChange",function(e){return t.search.to=e}),u.Ob(),u.Ob(),u.Ob(),u.Pb(16,"ion-col",1),u.Pb(17,"ion-item"),u.Lb(18,"ion-icon",4),u.Pb(19,"ion-label"),u.nc(20,"TEST"),u.Ob(),u.Pb(21,"ion-select",5),u.Xb("ngModelChange",function(e){return t.search.testId=e}),u.Pb(22,"ion-select-option",6),u.nc(23,"ALL"),u.Ob(),u.mc(24,d,2,2,"ion-select-option",7),u.Ob(),u.Ob(),u.Ob(),u.Ob(),u.Ob(),u.Pb(25,"ion-buttons",8),u.Pb(26,"ion-button",9),u.Xb("click",function(){return t.searchTests()}),u.Lb(27,"ion-icon",10),u.nc(28," SEARCH "),u.Ob(),u.Ob(),u.Ob(),u.Ob(),u.Pb(29,"ion-content",11),u.Pb(30,"ion-grid",0),u.Pb(31,"ion-row"),u.Lb(32,"ion-col",12),u.Pb(33,"ion-col",13),u.mc(34,m,45,8,"ion-card",14),u.Ob(),u.Lb(35,"ion-col",12),u.Ob(),u.Ob(),u.Ob(),u.Pb(36,"ion-footer"),u.Pb(37,"ion-toolbar"),u.Pb(38,"ion-title"),u.nc(39),u.ac(40,"number"),u.Ob(),u.Pb(41,"ion-buttons",8),u.Pb(42,"ion-button",15),u.Xb("click",function(){return t.exportToExcel()}),u.Lb(43,"ion-icon",16),u.nc(44," EXPORT TO EXCEL "),u.Ob(),u.Ob(),u.Ob(),u.Ob()),2&e&&(u.zb(9),u.ec("ngModel",t.search.from),u.zb(6),u.ec("ngModel",t.search.to),u.zb(6),u.ec("ngModel",t.search.testId),u.zb(3),u.ec("ngForOf",t.tests),u.zb(10),u.ec("ngForOf",t.results),u.zb(5),u.qc("Total: ",u.bc(40,7,t.sum())," (",t.results.length," Tests)"))},directives:[s.u,s.T,s.t,s.G,s.n,s.x,s.v,s.y,s.p,s.ab,i.d,i.e,s.K,s.L,o.j,s.h,s.g,s.o,s.s,s.R,s.i,s.j,s.z],pipes:[o.d],styles:[""]}),e})()}];let P=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.Ib({type:e}),e.\u0275inj=u.Hb({imports:[[b.j.forChild(O)],b.j]}),e})(),h=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.Ib({type:e}),e.\u0275inj=u.Hb({imports:[[o.b,i.a,s.U,P]]}),e})()}}]);