(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{EH7E:function(t,n,e){"use strict";e.r(n),e.d(n,"PatientsPageModule",function(){return w});var i=e("ofXK"),o=e("3Pt+"),a=e("TEn/"),s=e("tyNb"),c=e("mrSG"),l=e("gpqs"),b=e("vDqi"),r=e.n(b),d=e("U8hz"),u=e("wd/R"),p=e("fXoL");function f(t,n){1&t&&p.Lb(0,"ion-icon",15)}function g(t,n){if(1&t&&(p.Pb(0,"ion-avatar",16),p.Lb(1,"img",17),p.Ob()),2&t){const t=p.Zb().$implicit,n=p.Zb();p.zb(1),p.ec("src",n.api+t.image.photoPath,p.kc)}}function m(t,n){1&t&&p.Lb(0,"img",18)}function h(t,n){if(1&t){const t=p.Qb();p.Pb(0,"ion-button",19),p.Xb("click",function(){p.jc(t);const n=p.Zb().$implicit;return p.Zb().addToMuna(n)}),p.Lb(1,"ion-icon",2),p.nc(2," MUNA "),p.Ob()}}function P(t,n){if(1&t&&(p.Pb(0,"ion-item",7),p.mc(1,f,1,0,"ion-icon",8),p.mc(2,g,2,1,"ion-avatar",9),p.Pb(3,"ion-label"),p.Pb(4,"b"),p.nc(5),p.Ob(),p.Lb(6,"br"),p.Pb(7,"small"),p.nc(8),p.Ob(),p.Ob(),p.Pb(9,"ion-label"),p.nc(10),p.Ob(),p.Pb(11,"ion-label"),p.nc(12),p.Ob(),p.Pb(13,"ion-label"),p.nc(14),p.Ob(),p.Pb(15,"ion-label"),p.mc(16,m,1,0,"img",10),p.Ob(),p.Pb(17,"div",11),p.Pb(18,"ion-button",12),p.Lb(19,"ion-icon",13),p.nc(20," PROFILE "),p.Ob(),p.mc(21,h,3,0,"ion-button",14),p.Ob(),p.Ob()),2&t){const t=n.$implicit,e=p.Zb();p.zb(1),p.ec("ngIf",null==t.image),p.zb(1),p.ec("ngIf",null!=t.image),p.zb(3),p.oc(t.name),p.zb(3),p.pc("#",t.idPatient,""),p.zb(2),p.pc("Age: ",e.getAge(t.dob)," Years"),p.zb(2),p.pc("Gender: ",e.getGender(t.gender),""),p.zb(2),p.pc("Phone: ",t.phone,""),p.zb(2),p.ec("ngIf",null!=t.munaId),p.zb(2),p.ec("routerLink","/patients/"+t.idPatient+"/tests"),p.zb(3),p.ec("ngIf",null==t.munaId)}}function O(t,n){1&t&&(p.Pb(0,"ion-item",21),p.Pb(1,"ion-grid",22),p.Pb(2,"ion-row"),p.Pb(3,"ion-col",23),p.Lb(4,"ion-skeleton-text",24),p.Ob(),p.Pb(5,"ion-col",25),p.Lb(6,"ion-skeleton-text",24),p.Ob(),p.Pb(7,"ion-col",25),p.Lb(8,"ion-skeleton-text",24),p.Ob(),p.Pb(9,"ion-col",25),p.Lb(10,"ion-skeleton-text",24),p.Ob(),p.Ob(),p.Ob(),p.Ob())}const y=function(){return[1,2,3,4,5,6,7,8]};function v(t,n){1&t&&(p.Pb(0,"ion-list"),p.mc(1,O,11,0,"ion-item",20),p.Ob()),2&t&&(p.zb(1),p.ec("ngForOf",p.fc(1,y)))}const I=[{path:"",component:(()=>{class t{constructor(t,n,e){this.modalController=t,this.loadingCtrl=n,this.alertCtrl=e,this.page=1,this.patients=[],this.api=d.a}ngOnInit(){this.getPatients()}getPatients(){r.a.get(d.a+"patients?page="+this.page).then(t=>{this.patients=t.data.patients}).catch(t=>{console.log(t)})}getGender(t){return 0==t?"Male":"Female"}getAge(t){return u().diff(t,"years",!1)}showPatientProfile(t){return Object(c.a)(this,void 0,void 0,function*(){const n=yield this.modalController.create({component:l.a,mode:"ios",componentProps:{id:t},cssClass:"patientModal"});return yield n.present()})}addToMuna(t){return Object(c.a)(this,void 0,void 0,function*(){let n=yield this.loadingCtrl.create({message:"Please wait..."}),e=yield this.alertCtrl.create({header:"Confirm adding this pateint to MUNA system?",buttons:[{text:"YES",handler:()=>Object(c.a)(this,void 0,void 0,function*(){yield n.present(),r.a.post(d.b+"identities",JSON.stringify({data:{type:"identity",attributes:{email:t.email,passport:t.documentId}}})).then(e=>{r.a.put(d.a+"patientMunaId/"+t.idPatient,{munaId:e.data.data.id}).finally(()=>Object(c.a)(this,void 0,void 0,function*(){this.getPatients(),yield n.dismiss()}))}).catch(t=>{console.log(t)}).finally(()=>Object(c.a)(this,void 0,void 0,function*(){yield n.dismiss()}))})},{text:"NO"}]});yield e.present()})}search(t){return t}}return t.\u0275fac=function(n){return new(n||t)(p.Kb(a.W),p.Kb(a.V),p.Kb(a.a))},t.\u0275cmp=p.Eb({type:t,selectors:[["app-patients"]],decls:14,vars:3,consts:[["slot","end"],["routerLink","/patient/new","color","success","fill","solid"],["slot","start","name","add"],["mode","ios","placeholder","Search By Patient ID or Patient Name",3,"debounce","ionChange"],[1,"ion-padding"],["lines","full",4,"ngFor","ngForOf"],[4,"ngIf"],["lines","full"],["slot","start","name","person-circle-outline",4,"ngIf"],["slot","start",4,"ngIf"],["src","assets/icon/muna.svg","height","20px","alt","",4,"ngIf"],[2,"width","100px"],["color","danger","expand","block","fill","clear",3,"routerLink"],["slot","start","name","create"],["color","secondary","expand","block","fill","clear",3,"click",4,"ngIf"],["slot","start","name","person-circle-outline"],["slot","start"],[3,"src"],["src","assets/icon/muna.svg","height","20px","alt",""],["color","secondary","expand","block","fill","clear",3,"click"],["lines","full","button","",4,"ngFor","ngForOf"],["lines","full","button",""],["fixed",""],["size","3"],["animated",""],["size","2"]],template:function(t,n){1&t&&(p.Pb(0,"ion-header"),p.Pb(1,"ion-toolbar"),p.Pb(2,"ion-buttons",0),p.Pb(3,"ion-button",1),p.Lb(4,"ion-icon",2),p.nc(5," Add new patient "),p.Ob(),p.Ob(),p.Pb(6,"ion-title"),p.nc(7,"Patients"),p.Ob(),p.Ob(),p.Pb(8,"ion-toolbar"),p.Pb(9,"ion-searchbar",3),p.Xb("ionChange",function(t){return n.search(t)}),p.Ob(),p.Ob(),p.Ob(),p.Pb(10,"ion-content",4),p.Pb(11,"ion-list"),p.mc(12,P,22,10,"ion-item",5),p.Ob(),p.mc(13,v,2,2,"ion-list",6),p.Ob()),2&t&&(p.zb(9),p.ec("debounce",250),p.zb(3),p.ec("ngForOf",n.patients),p.zb(1),p.ec("ngIf",0==n.patients.length))},directives:[a.t,a.S,a.h,a.g,a.Y,s.h,a.u,a.Q,a.G,a.ab,a.n,a.y,i.j,i.k,a.w,a.x,a.d,a.s,a.F,a.m,a.L],styles:[""]}),t})()}];let z=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=p.Ib({type:t}),t.\u0275inj=p.Hb({imports:[[s.j.forChild(I)],s.j]}),t})();var k=e("m1XX");let w=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=p.Ib({type:t}),t.\u0275inj=p.Hb({imports:[[i.b,o.a,a.T,z,k.b]]}),t})()}}]);