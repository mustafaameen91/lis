(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{EH7E:function(t,n,e){"use strict";e.r(n),e.d(n,"PatientsPageModule",function(){return L});var i=e("ofXK"),o=e("3Pt+"),a=e("TEn/"),s=e("tyNb"),c=e("mrSG"),l=e("gpqs"),r=e("vDqi"),b=e.n(r),d=e("U8hz"),u=e("wd/R"),p=e("fXoL");function g(t,n){1&t&&p.Lb(0,"ion-icon",17)}function f(t,n){if(1&t&&(p.Pb(0,"ion-avatar",18),p.Lb(1,"img",19),p.Ob()),2&t){const t=p.Zb().$implicit,n=p.Zb();p.zb(1),p.ec("src",n.api+t.image.photoPath,p.kc)}}function h(t,n){1&t&&p.Lb(0,"img",20)}function m(t,n){if(1&t){const t=p.Qb();p.Pb(0,"ion-button",21),p.Xb("click",function(){p.jc(t);const n=p.Zb().$implicit;return p.Zb().addToMuna(n)}),p.Lb(1,"ion-icon",2),p.nc(2," MUNA "),p.Ob()}}function P(t,n){if(1&t&&(p.Pb(0,"ion-item",7),p.mc(1,g,1,0,"ion-icon",8),p.mc(2,f,2,1,"ion-avatar",9),p.Pb(3,"ion-label"),p.Pb(4,"b"),p.nc(5),p.Ob(),p.Lb(6,"br"),p.Pb(7,"small"),p.nc(8),p.Ob(),p.Ob(),p.Pb(9,"ion-label"),p.nc(10),p.Ob(),p.Pb(11,"ion-label"),p.nc(12),p.Ob(),p.Pb(13,"ion-label"),p.nc(14),p.Ob(),p.Pb(15,"ion-label"),p.mc(16,h,1,0,"img",10),p.Ob(),p.Pb(17,"div",11),p.Pb(18,"ion-button",12),p.Lb(19,"ion-icon",13),p.nc(20," TESTS "),p.Ob(),p.Pb(21,"ion-button",14),p.Lb(22,"ion-icon",15),p.nc(23," EDIT "),p.Ob(),p.mc(24,m,3,0,"ion-button",16),p.Ob(),p.Ob()),2&t){const t=n.$implicit,e=p.Zb();p.zb(1),p.ec("ngIf",null==t.image),p.zb(1),p.ec("ngIf",null!=t.image),p.zb(3),p.oc(t.name),p.zb(3),p.pc("#",t.idPatient,""),p.zb(2),p.pc("Age: ",e.getAge(t.dob)," Years"),p.zb(2),p.pc("Gender: ",e.getGender(t.gender),""),p.zb(2),p.pc("Phone: ",t.phone,""),p.zb(2),p.ec("ngIf",null!=t.munaId),p.zb(2),p.ec("routerLink","/patients/"+t.idPatient+"/tests"),p.zb(3),p.ec("routerLink","/patient/"+t.idPatient),p.zb(3),p.ec("ngIf",null==t.munaId)}}function O(t,n){1&t&&(p.Pb(0,"ion-item",23),p.Pb(1,"ion-grid",24),p.Pb(2,"ion-row"),p.Pb(3,"ion-col",25),p.Lb(4,"ion-skeleton-text",26),p.Ob(),p.Pb(5,"ion-col",27),p.Lb(6,"ion-skeleton-text",26),p.Ob(),p.Pb(7,"ion-col",27),p.Lb(8,"ion-skeleton-text",26),p.Ob(),p.Pb(9,"ion-col",27),p.Lb(10,"ion-skeleton-text",26),p.Ob(),p.Ob(),p.Ob(),p.Ob())}const y=function(){return[1,2,3,4,5,6,7,8]};function k(t,n){1&t&&(p.Pb(0,"ion-list"),p.mc(1,O,11,0,"ion-item",22),p.Ob()),2&t&&(p.zb(1),p.ec("ngForOf",p.fc(1,y)))}const v=[{path:"",component:(()=>{class t{constructor(t,n,e,i){this.modalController=t,this.loadingCtrl=n,this.alertCtrl=e,this.router=i,this.page=1,this.patients=[],this.api=d.a,this.searchbar=""}ngOnInit(){this.getPatients()}getPatients(){b.a.get(d.a+"patients?page="+this.page).then(t=>{this.patients=t.data.patients}).catch(t=>{console.log(t)})}getGender(t){return 0==t?"Male":"Female"}getAge(t){return u().diff(t,"years",!1)}showPatientProfile(t){return Object(c.a)(this,void 0,void 0,function*(){const n=yield this.modalController.create({component:l.a,mode:"ios",componentProps:{id:t},cssClass:"patientModal"});return yield n.present()})}addToMuna(t){return Object(c.a)(this,void 0,void 0,function*(){let n=yield this.loadingCtrl.create({message:"Please wait..."}),e=yield this.alertCtrl.create({header:"Confirm adding this pateint to MUNA system?",buttons:[{text:"YES",handler:()=>Object(c.a)(this,void 0,void 0,function*(){yield n.present(),b.a.post(d.b+"identities",JSON.stringify({data:{type:"identity",attributes:{email:t.email,passport:t.documentId}}})).then(e=>{b.a.put(d.a+"patientMunaId/"+t.idPatient,{munaId:e.data.data.id}).finally(()=>Object(c.a)(this,void 0,void 0,function*(){this.getPatients(),yield n.dismiss()}))}).catch(t=>{console.log(t)}).finally(()=>Object(c.a)(this,void 0,void 0,function*(){yield n.dismiss()}))})},{text:"NO"}]});yield e.present()})}search(t){console.log(t),b.a.get(d.a+"patientResult/"+this.searchbar).then(t=>{b.a.get(d.a+"patientTest/ "+t.data.patientTestId).then(t=>{this.router.navigateByUrl("/patients/"+t.data.patientId+"/tests")})})}}return t.\u0275fac=function(n){return new(n||t)(p.Kb(a.X),p.Kb(a.W),p.Kb(a.a),p.Kb(s.g))},t.\u0275cmp=p.Eb({type:t,selectors:[["app-patients"]],decls:14,vars:4,consts:[["slot","end"],["routerLink","/patient/new","color","success","fill","solid"],["slot","start","name","add"],["mode","ios","placeholder","Search By Patient ID or Patient Name",3,"ngModel","debounce","keyup.enter","ngModelChange"],[1,"ion-padding"],["lines","full",4,"ngFor","ngForOf"],[4,"ngIf"],["lines","full"],["slot","start","name","person-circle-outline",4,"ngIf"],["slot","start",4,"ngIf"],["src","assets/icon/muna.svg","height","20px","alt","",4,"ngIf"],[2,"width","100px"],["color","danger","expand","block","fill","clear",3,"routerLink"],["slot","start","name","flask"],["color","secondary","expand","block","fill","clear",3,"routerLink"],["slot","start","name","create"],["color","secondary","expand","block","fill","clear",3,"click",4,"ngIf"],["slot","start","name","person-circle-outline"],["slot","start"],[3,"src"],["src","assets/icon/muna.svg","height","20px","alt",""],["color","secondary","expand","block","fill","clear",3,"click"],["lines","full","button","",4,"ngFor","ngForOf"],["lines","full","button",""],["fixed",""],["size","3"],["animated",""],["size","2"]],template:function(t,n){1&t&&(p.Pb(0,"ion-header"),p.Pb(1,"ion-toolbar"),p.Pb(2,"ion-buttons",0),p.Pb(3,"ion-button",1),p.Lb(4,"ion-icon",2),p.nc(5," Add new patient "),p.Ob(),p.Ob(),p.Pb(6,"ion-title"),p.nc(7,"Patients"),p.Ob(),p.Ob(),p.Pb(8,"ion-toolbar"),p.Pb(9,"ion-searchbar",3),p.Xb("keyup.enter",function(t){return n.search(t)})("ngModelChange",function(t){return n.searchbar=t}),p.Ob(),p.Ob(),p.Ob(),p.Pb(10,"ion-content",4),p.Pb(11,"ion-list"),p.mc(12,P,25,11,"ion-item",5),p.Ob(),p.mc(13,k,2,2,"ion-list",6),p.Ob()),2&t&&(p.zb(9),p.ec("ngModel",n.searchbar)("debounce",250),p.zb(3),p.ec("ngForOf",n.patients),p.zb(1),p.ec("ngIf",0==n.patients.length))},directives:[a.u,a.T,a.h,a.g,a.Z,s.h,a.v,a.R,a.H,a.bb,o.d,o.e,a.o,a.z,i.j,i.k,a.x,a.y,a.d,a.t,a.G,a.n,a.M],styles:[""]}),t})()}];let I=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=p.Ib({type:t}),t.\u0275inj=p.Hb({imports:[[s.j.forChild(v)],s.j]}),t})();var z=e("m1XX");let L=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=p.Ib({type:t}),t.\u0275inj=p.Hb({imports:[[i.b,o.a,a.U,I,z.b]]}),t})()}}]);