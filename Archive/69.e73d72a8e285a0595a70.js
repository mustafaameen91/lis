(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{EH7E:function(t,e,n){"use strict";n.r(e),n.d(e,"PatientsPageModule",function(){return w});var i=n("ofXK"),o=n("3Pt+"),a=n("TEn/"),s=n("tyNb"),c=n("mrSG"),r=n("gpqs"),l=n("vDqi"),b=n.n(l),d=n("U8hz"),u=n("wd/R"),p=n("fXoL"),g=n("7okS");function f(t,e){1&t&&p.Lb(0,"ion-icon",17)}function h(t,e){if(1&t&&(p.Pb(0,"ion-avatar",18),p.Lb(1,"img",19),p.Ob()),2&t){const t=p.Zb().$implicit,e=p.Zb();p.zb(1),p.ec("src",e.api+t.image.photoPath,p.mc)}}function m(t,e){1&t&&p.Lb(0,"img",20)}function P(t,e){if(1&t){const t=p.Qb();p.Pb(0,"ion-button",21),p.Xb("click",function(){p.lc(t);const e=p.Zb().$implicit;return p.Zb().addToMuna(e)}),p.Lb(1,"ion-icon",2),p.pc(2," MUNA "),p.Ob()}}function O(t,e){if(1&t&&(p.Pb(0,"ion-item",7),p.oc(1,f,1,0,"ion-icon",8),p.oc(2,h,2,1,"ion-avatar",9),p.Pb(3,"ion-label"),p.Pb(4,"b"),p.pc(5),p.Ob(),p.Lb(6,"br"),p.Pb(7,"small"),p.pc(8),p.Ob(),p.Ob(),p.Pb(9,"ion-label"),p.pc(10),p.Ob(),p.Pb(11,"ion-label"),p.pc(12),p.Ob(),p.Pb(13,"ion-label"),p.pc(14),p.Ob(),p.Pb(15,"ion-label"),p.oc(16,m,1,0,"img",10),p.Ob(),p.Pb(17,"div",11),p.Pb(18,"ion-button",12),p.Lb(19,"ion-icon",13),p.pc(20," TESTS "),p.Ob(),p.Pb(21,"ion-button",14),p.Lb(22,"ion-icon",15),p.pc(23," EDIT "),p.Ob(),p.oc(24,P,3,0,"ion-button",16),p.Ob(),p.Ob()),2&t){const t=e.$implicit,n=p.Zb();p.zb(1),p.ec("ngIf",null==t.image),p.zb(1),p.ec("ngIf",null!=t.image),p.zb(3),p.qc(t.name),p.zb(3),p.rc("#",t.idPatient,""),p.zb(2),p.rc("Age: ",n.getAge(t.dob)," Years"),p.zb(2),p.rc("Gender: ",n.getGender(t.gender),""),p.zb(2),p.rc("Phone: ",t.phone,""),p.zb(2),p.ec("ngIf",null!=t.munaId),p.zb(2),p.ec("routerLink","/patients/"+t.idPatient+"/tests"),p.zb(3),p.ec("routerLink","/patient/"+t.idPatient),p.zb(3),p.ec("ngIf",null==t.munaId)}}function y(t,e){1&t&&(p.Pb(0,"ion-item",23),p.Pb(1,"ion-grid",24),p.Pb(2,"ion-row"),p.Pb(3,"ion-col",25),p.Lb(4,"ion-skeleton-text",26),p.Ob(),p.Pb(5,"ion-col",27),p.Lb(6,"ion-skeleton-text",26),p.Ob(),p.Pb(7,"ion-col",27),p.Lb(8,"ion-skeleton-text",26),p.Ob(),p.Pb(9,"ion-col",27),p.Lb(10,"ion-skeleton-text",26),p.Ob(),p.Ob(),p.Ob(),p.Ob())}const I=function(){return[1,2,3,4,5,6,7,8]};function k(t,e){1&t&&(p.Pb(0,"ion-list"),p.oc(1,y,11,0,"ion-item",22),p.Ob()),2&t&&(p.zb(1),p.ec("ngForOf",p.fc(1,I)))}const v=[{path:"",component:(()=>{class t{constructor(t,e,n,i,o){this.modalController=t,this.loadingCtrl=e,this.alertCtrl=n,this.router=i,this.storage=o,this.page=1,this.patients=[],this.api=d.a,this.searchbar=""}ngOnInit(){this.storage.get("user").then(t=>{this.userinfo=t.data,this.getPatients()})}getPatients(){b.a.get(d.a+"patients?page="+this.page+"&roleId="+this.userinfo.roleId).then(t=>{this.patients=t.data.patients}).catch(t=>{console.log(t)})}getGender(t){return 0==t?"Male":"Female"}getAge(t){return u().diff(t,"years",!1)}showPatientProfile(t){return Object(c.a)(this,void 0,void 0,function*(){const e=yield this.modalController.create({component:r.a,mode:"ios",componentProps:{id:t},cssClass:"patientModal"});return yield e.present()})}addToMuna(t){return Object(c.a)(this,void 0,void 0,function*(){let e=yield this.loadingCtrl.create({message:"Please wait..."}),n=yield this.alertCtrl.create({header:"Confirm adding this pateint to MUNA system?",buttons:[{text:"YES",handler:()=>Object(c.a)(this,void 0,void 0,function*(){yield e.present(),b.a.post(d.b+"identities",JSON.stringify({data:{type:"identity",attributes:{email:t.email,passport:t.documentId}}})).then(n=>{b.a.put(d.a+"patientMunaId/"+t.idPatient,{munaId:n.data.data.id}).finally(()=>Object(c.a)(this,void 0,void 0,function*(){this.getPatients(),yield e.dismiss()}))}).catch(t=>{console.log(t)}).finally(()=>Object(c.a)(this,void 0,void 0,function*(){yield e.dismiss()}))})},{text:"NO"}]});yield n.present()})}search(t){console.log(t),b.a.get(d.a+"patientResult/"+this.searchbar).then(t=>{b.a.get(d.a+"patientTest/ "+t.data.patientTestId).then(t=>{this.router.navigateByUrl("/patients/"+t.data.patientId+"/tests")})})}}return t.\u0275fac=function(e){return new(e||t)(p.Kb(a.cb),p.Kb(a.bb),p.Kb(a.a),p.Kb(s.g),p.Kb(g.a))},t.\u0275cmp=p.Eb({type:t,selectors:[["app-patients"]],decls:14,vars:4,consts:[["slot","end"],["routerLink","/patient/new","color","success","fill","solid"],["slot","start","name","add"],["mode","ios","placeholder","Search By Patient ID or Patient Name",3,"ngModel","debounce","keyup.enter","ngModelChange"],[1,"ion-padding"],["lines","full",4,"ngFor","ngForOf"],[4,"ngIf"],["lines","full"],["slot","start","name","person-circle-outline",4,"ngIf"],["slot","start",4,"ngIf"],["src","assets/icon/muna.svg","height","20px","alt","",4,"ngIf"],[2,"width","100px"],["color","danger","expand","block","fill","clear",3,"routerLink"],["slot","start","name","flask"],["color","secondary","expand","block","fill","clear",3,"routerLink"],["slot","start","name","create"],["color","secondary","expand","block","fill","clear",3,"click",4,"ngIf"],["slot","start","name","person-circle-outline"],["slot","start"],[3,"src"],["src","assets/icon/muna.svg","height","20px","alt",""],["color","secondary","expand","block","fill","clear",3,"click"],["lines","full","button","",4,"ngFor","ngForOf"],["lines","full","button",""],["fixed",""],["size","3"],["animated",""],["size","2"]],template:function(t,e){1&t&&(p.Pb(0,"ion-header"),p.Pb(1,"ion-toolbar"),p.Pb(2,"ion-buttons",0),p.Pb(3,"ion-button",1),p.Lb(4,"ion-icon",2),p.pc(5," Add new patient "),p.Ob(),p.Ob(),p.Pb(6,"ion-title"),p.pc(7,"Patients"),p.Ob(),p.Ob(),p.Pb(8,"ion-toolbar"),p.Pb(9,"ion-searchbar",3),p.Xb("keyup.enter",function(t){return e.search(t)})("ngModelChange",function(t){return e.searchbar=t}),p.Ob(),p.Ob(),p.Ob(),p.Pb(10,"ion-content",4),p.Pb(11,"ion-list"),p.oc(12,O,25,11,"ion-item",5),p.Ob(),p.oc(13,k,2,2,"ion-list",6),p.Ob()),2&t&&(p.zb(9),p.ec("ngModel",e.searchbar)("debounce",250),p.zb(3),p.ec("ngForOf",e.patients),p.zb(1),p.ec("ngIf",0==e.patients.length))},directives:[a.u,a.X,a.h,a.g,a.gb,s.h,a.v,a.V,a.L,a.ib,o.d,o.e,a.o,a.D,i.j,i.k,a.z,a.C,a.d,a.t,a.K,a.n,a.Q],styles:[""]}),t})()}];let z=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=p.Ib({type:t}),t.\u0275inj=p.Hb({imports:[[s.j.forChild(v)],s.j]}),t})();var L=n("m1XX");let w=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=p.Ib({type:t}),t.\u0275inj=p.Hb({imports:[[i.b,o.a,a.Z,z,L.b]]}),t})()}}]);