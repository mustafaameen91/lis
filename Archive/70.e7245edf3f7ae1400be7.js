(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{EH7E:function(t,e,n){"use strict";n.r(e),n.d(e,"PatientsPageModule",function(){return C});var i=n("ofXK"),o=n("3Pt+"),a=n("TEn/"),s=n("tyNb"),c=n("mrSG"),r=n("gpqs"),b=n("vDqi"),l=n.n(b),d=n("U8hz"),u=n("wd/R"),p=n("fXoL"),g=n("7okS");function f(t,e){1&t&&(p.Pb(0,"ion-button",9),p.Lb(1,"ion-icon",10),p.pc(2," Add new patient "),p.Ob())}function h(t,e){1&t&&p.Lb(0,"ion-icon",16)}function P(t,e){if(1&t&&(p.Pb(0,"ion-avatar",17),p.Lb(1,"img",18),p.Ob()),2&t){const t=p.Zb().$implicit,e=p.Zb();p.zb(1),p.ec("src",e.api+t.image.photoPath,p.mc)}}function m(t,e){1&t&&p.Lb(0,"img",19)}function O(t,e){if(1&t){const t=p.Qb();p.Pb(0,"ion-button",26),p.Xb("click",function(){p.lc(t);const e=p.Zb(2).$implicit;return p.Zb().addToMuna(e)}),p.Lb(1,"ion-icon",10),p.pc(2," MUNA "),p.Ob()}}function k(t,e){if(1&t&&(p.Pb(0,"div",20),p.Pb(1,"ion-button",21),p.Lb(2,"ion-icon",22),p.pc(3," TESTS "),p.Ob(),p.Pb(4,"ion-button",23),p.Lb(5,"ion-icon",24),p.pc(6," EDIT "),p.Ob(),p.oc(7,O,3,0,"ion-button",25),p.Ob()),2&t){const t=p.Zb().$implicit;p.zb(1),p.ec("routerLink","/patients/"+t.idPatient+"/tests"),p.zb(3),p.ec("routerLink","/patient/"+t.idPatient),p.zb(3),p.ec("ngIf",null==t.munaId)}}function y(t,e){if(1&t&&(p.Pb(0,"ion-item",11),p.oc(1,h,1,0,"ion-icon",12),p.oc(2,P,2,1,"ion-avatar",13),p.Pb(3,"ion-label"),p.Pb(4,"b"),p.pc(5),p.Ob(),p.Lb(6,"br"),p.Pb(7,"small"),p.pc(8),p.Ob(),p.Ob(),p.Pb(9,"ion-label"),p.pc(10),p.Ob(),p.Pb(11,"ion-label"),p.pc(12),p.Ob(),p.Pb(13,"ion-label"),p.pc(14),p.Ob(),p.Pb(15,"ion-label"),p.oc(16,m,1,0,"img",14),p.Ob(),p.oc(17,k,8,3,"div",15),p.Ob()),2&t){const t=e.$implicit,n=p.Zb();p.zb(1),p.ec("ngIf",null==t.image),p.zb(1),p.ec("ngIf",null!=t.image),p.zb(3),p.qc(t.name),p.zb(3),p.rc("#",t.idPatient,""),p.zb(2),p.rc("Age: ",n.getAge(t.dob)," Years"),p.zb(2),p.rc("Gender: ",n.getGender(t.gender),""),p.zb(2),p.rc("Phone: ",t.phone,""),p.zb(2),p.ec("ngIf",null!=t.munaId),p.zb(1),p.ec("ngIf",3!=n.userinfo.idRole)}}function v(t,e){1&t&&(p.Pb(0,"ion-item",28),p.Pb(1,"ion-grid",29),p.Pb(2,"ion-row"),p.Pb(3,"ion-col",30),p.Lb(4,"ion-skeleton-text",31),p.Ob(),p.Pb(5,"ion-col",32),p.Lb(6,"ion-skeleton-text",31),p.Ob(),p.Pb(7,"ion-col",32),p.Lb(8,"ion-skeleton-text",31),p.Ob(),p.Pb(9,"ion-col",32),p.Lb(10,"ion-skeleton-text",31),p.Ob(),p.Ob(),p.Ob(),p.Ob())}const I=function(){return[1,2,3,4,5,6,7,8]};function z(t,e){1&t&&(p.Pb(0,"ion-list"),p.oc(1,v,11,0,"ion-item",27),p.Ob()),2&t&&(p.zb(1),p.ec("ngForOf",p.fc(1,I)))}const L=[{path:"",component:(()=>{class t{constructor(t,e,n,i,o){this.modalController=t,this.loadingCtrl=e,this.alertCtrl=n,this.router=i,this.storage=o,this.page=1,this.numberPerPage=20,this.patients=[],this.api=d.a,this.searchbar="",this.userinfo={idRole:3}}ngOnInit(){this.storage.get("user").then(t=>{this.userinfo=t.data,this.getPatients()})}getPatients(){l.a.get(d.a+"patients?page="+this.page+"&roleId="+this.userinfo.idRole+"&number="+this.numberPerPage).then(t=>{this.patients=t.data.patients}).catch(t=>{console.log(t)})}nextPage(){this.patients=[],this.page>0&&(this.page=this.page+1,this.getPatients())}prevPage(){this.patients=[],this.page>1&&(this.page=this.page-1,this.getPatients())}getGender(t){return 0==t?"Male":"Female"}getAge(t){return u().diff(t,"years",!1)}showPatientProfile(t){return Object(c.a)(this,void 0,void 0,function*(){const e=yield this.modalController.create({component:r.a,mode:"ios",componentProps:{id:t},cssClass:"patientModal"});return yield e.present()})}addToMuna(t){return Object(c.a)(this,void 0,void 0,function*(){let e=yield this.loadingCtrl.create({message:"Please wait..."}),n=yield this.alertCtrl.create({header:"Confirm adding this pateint to MUNA system?",buttons:[{text:"YES",handler:()=>Object(c.a)(this,void 0,void 0,function*(){yield e.present(),l.a.post(d.b+"identities",JSON.stringify({data:{type:"identity",attributes:{email:t.email,passport:t.documentId}}})).then(n=>{l.a.put(d.a+"patientMunaId/"+t.idPatient,{munaId:n.data.data.id}).finally(()=>Object(c.a)(this,void 0,void 0,function*(){this.getPatients(),yield e.dismiss()}))}).catch(t=>{console.log(t)}).finally(()=>Object(c.a)(this,void 0,void 0,function*(){yield e.dismiss()}))})},{text:"NO"}]});yield n.present()})}search(t){console.log(t),l.a.get(d.a+"patientResult/"+this.searchbar).then(t=>{l.a.get(d.a+"patientTest/ "+t.data.patientTestId).then(t=>{this.router.navigateByUrl("/patients/"+t.data.patientId+"/tests")})})}}return t.\u0275fac=function(e){return new(e||t)(p.Kb(a.cb),p.Kb(a.bb),p.Kb(a.a),p.Kb(s.g),p.Kb(g.a))},t.\u0275cmp=p.Eb({type:t,selectors:[["app-patients"]],decls:21,vars:6,consts:[["slot","end"],["routerLink","/patient/new","color","success","fill","solid",4,"ngIf"],["mode","ios","placeholder","Search By Patient ID or Patient Name",3,"ngModel","debounce","keyup.enter","ngModelChange"],[1,"ion-padding"],["lines","full",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"click"],["name","chevron-back-outline"],["name","chevron-forward-outline"],["routerLink","/patient/new","color","success","fill","solid"],["slot","start","name","add"],["lines","full"],["slot","start","name","person-circle-outline",4,"ngIf"],["slot","start",4,"ngIf"],["src","assets/icon/muna.svg","height","20px","alt","",4,"ngIf"],["style","width:100px",4,"ngIf"],["slot","start","name","person-circle-outline"],["slot","start"],[3,"src"],["src","assets/icon/muna.svg","height","20px","alt",""],[2,"width","100px"],["color","danger","expand","block","fill","clear",3,"routerLink"],["slot","start","name","flask"],["color","secondary","expand","block","fill","clear",3,"routerLink"],["slot","start","name","create"],["color","secondary","expand","block","fill","clear",3,"click",4,"ngIf"],["color","secondary","expand","block","fill","clear",3,"click"],["lines","full","button","",4,"ngFor","ngForOf"],["lines","full","button",""],["fixed",""],["size","3"],["animated",""],["size","2"]],template:function(t,e){1&t&&(p.Pb(0,"ion-header"),p.Pb(1,"ion-toolbar"),p.Pb(2,"ion-buttons",0),p.oc(3,f,3,0,"ion-button",1),p.Ob(),p.Pb(4,"ion-title"),p.pc(5,"Patients"),p.Ob(),p.Ob(),p.Pb(6,"ion-toolbar"),p.Pb(7,"ion-searchbar",2),p.Xb("keyup.enter",function(t){return e.search(t)})("ngModelChange",function(t){return e.searchbar=t}),p.Ob(),p.Ob(),p.Ob(),p.Pb(8,"ion-content",3),p.Pb(9,"ion-list"),p.oc(10,y,18,9,"ion-item",4),p.Ob(),p.oc(11,z,2,2,"ion-list",5),p.Ob(),p.Pb(12,"ion-footer"),p.Pb(13,"ion-toolbar"),p.Pb(14,"ion-title"),p.pc(15),p.Ob(),p.Pb(16,"ion-buttons",0),p.Pb(17,"ion-button",6),p.Xb("click",function(){return e.prevPage()}),p.Lb(18,"ion-icon",7),p.Ob(),p.Pb(19,"ion-button",6),p.Xb("click",function(){return e.nextPage()}),p.Lb(20,"ion-icon",8),p.Ob(),p.Ob(),p.Ob(),p.Ob()),2&t&&(p.zb(3),p.ec("ngIf",3!=e.userinfo.idRole),p.zb(4),p.ec("ngModel",e.searchbar)("debounce",250),p.zb(3),p.ec("ngForOf",e.patients),p.zb(1),p.ec("ngIf",0==e.patients.length),p.zb(4),p.rc("Page: ",e.page,""))},directives:[a.u,a.X,a.h,i.k,a.V,a.L,a.ib,o.d,o.e,a.o,a.D,i.j,a.s,a.g,a.v,a.gb,s.h,a.z,a.C,a.d,a.t,a.K,a.n,a.Q],styles:[""]}),t})()}];let w=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=p.Ib({type:t}),t.\u0275inj=p.Hb({imports:[[s.j.forChild(L)],s.j]}),t})();var x=n("m1XX");let C=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=p.Ib({type:t}),t.\u0275inj=p.Hb({imports:[[i.b,o.a,a.Z,w,x.b]]}),t})()}}]);